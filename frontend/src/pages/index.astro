---
import BaseLayout from '../layouts/BaseLayout.astro';

// For build time, use fallback categories since S3 may not be available
// In production with server-side rendering, this would fetch dynamically
let categories = ['machining', 'molding', 'fabrication', 'additive', 'electronics'];

// Create category display names mapping
const categoryNames = {
  'machining': 'CNC Machining',
  'molding': 'Injection Molding', 
  'fabrication': 'Sheet Metal',
  'additive': '3D Printing',
  'electronics': 'Electronics'
};

// Take first 3 categories for featured display
const featuredCategories = categories.slice(0, 3);
---

<BaseLayout title="Terra - US Manufacturing Directory">
  <section class="hero">
    <h2>Connect with US Manufacturers</h2>
    <p>
      Find qualified manufacturers for your projects and submit RFQs directly.
      Fast, reliable, and built for American manufacturing.
    </p>
  </section>

  <div class="grid grid-2">
    <div class="card">
      <h3>Browse Manufacturers</h3>
      <p>Explore our directory of verified US manufacturers across all categories.</p>
      <a href={`${import.meta.env.BASE_URL}catalog/${categories[0] || 'machining'}/`} class="btn">Browse Now</a>
    </div>

    <div class="card">
      <h3>Submit an RFQ</h3>
      <p>Get quotes quickly by submitting your requirements directly to manufacturers.</p>
      <a href={`${import.meta.env.BASE_URL}rfq/submit`} class="btn btn-primary">Get Started</a>
    </div>
  </div>

  <section class="features">
    <h3>Why Choose Terra?</h3>
    <div class="grid grid-3">
      <div class="feature">
        <h4>ðŸ‡ºðŸ‡¸ US-Only</h4>
        <p>All manufacturers are verified US-based companies</p>
      </div>
      <div class="feature">
        <h4>âš¡ Fast Quotes</h4>
        <p>Get responses from manufacturers in hours, not days</p>
      </div>
      <div class="feature">
        <h4>ðŸ”’ Secure</h4>
        <p>Your projects and data are protected</p>
      </div>
    </div>
  </section>

  <div class="card">
    <h3>Popular Categories</h3>
    <p>{categories.map(cat => categoryNames[cat] || cat).join(' â€¢ ')}</p>
    <div style="margin-top: 1rem;">
      {featuredCategories.map((category, index) => (
        <a 
          href={`${import.meta.env.BASE_URL}catalog/${category}/`} 
          class="btn" 
          style={index < featuredCategories.length - 1 ? "margin-right: 1rem;" : ""}
        >
          {categoryNames[category] || category}
        </a>
      ))}
    </div>
  </div>
</BaseLayout>